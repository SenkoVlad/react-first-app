(this["webpackJsonpfirst-app"]=this["webpackJsonpfirst-app"]||[]).push([[3],{294:function(e,t,s){e.exports={userPhoto:"ProfileInfo_userPhoto__NyjsD",whiteText:"ProfileInfo_whiteText__RUSFa",contactsBlock:"ProfileInfo_contactsBlock__Pbwqo",profileGeneralInfo:"ProfileInfo_profileGeneralInfo__1Kvy5",errorBlock:"ProfileInfo_errorBlock__2vfG6"}},298:function(e,t,s){e.exports={content:"Profile_content__2qaVr"}},299:function(e,t,s){e.exports={paddingTop10:"Posts_paddingTop10__3nRd2"}},300:function(e,t,s){e.exports={item:"Post_item__P2UQl"}},302:function(e,t,s){"use strict";s.r(t);var n=s(30),r=s(31),i=s(34),o=s(33),c=s(1),a=s.n(c),l=s(17),j=s(98),d=s(294),u=s.n(d),b=s(109),p=s(0),f=function(e){var t=Object(c.useState)(e.status),s=Object(j.a)(t,2),n=s[0],r=s[1],i=Object(c.useState)(!0),o=Object(j.a)(i,2),a=o[0],l=o[1];Object(c.useEffect)((function(){e.status&&r(e.status)}),[e.status]);var d=function(t){l(t),t&&e.updateUserStatus(n)};return Object(p.jsx)(p.Fragment,{children:a?Object(p.jsx)("div",{children:Object(p.jsx)("span",{onDoubleClick:function(){return d(!1)},children:n||"---------"})}):Object(p.jsx)("div",{children:Object(p.jsx)("input",{onChange:function(e){r(e.currentTarget.value)},onBlur:function(){return d(!0)},autoFocus:!0,value:n})})})},h=s(88),O=s(130),x=s(56),m=Object(O.a)({form:"profile"})((function(e){var t=e.handleSubmit,s=e.initialValues,n=e.error;return Object(p.jsxs)("form",{onSubmit:t,children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Full name:"}),Object(p.jsx)(h.a,{component:x.a,placeholder:"Full name",id:"fullName",name:"name",validate:[]})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Country: "}),Object(p.jsx)(h.a,{component:x.a,placeholder:"Country",id:"country",name:"location.country",validate:[]})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"City: "}),Object(p.jsx)(h.a,{component:x.a,placeholder:"City",id:"city",name:"location.city",validate:[]})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Looking job: "}),Object(p.jsx)(h.a,{component:x.a,type:"checkbox",id:"isLookingForAJob",name:"isLookingForAJob",validate:[]})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Resume: "}),Object(p.jsx)(h.a,{component:x.a,placeholder:"Resume text",id:"resumeText",name:"resumeText",validate:[]})]}),Object(p.jsxs)("div",{className:u.a.contactsBlock,children:[Object(p.jsx)("b",{children:"Contacts: "}),Object(p.jsx)("div",{children:Object.keys(s.userContacts).map((function(e){return Object(p.jsx)(h.a,{component:x.a,placeholder:e,id:e,name:"userContacts."+e,validate:[]},e)}))})]}),Object(p.jsx)("button",{children:"Save"}),n&&Object(p.jsx)("div",{className:u.a.errorBlock,children:n})]})})),v=s(12),g=function(e){var t=e.site,s=e.url;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("b",{children:[t,": "]}),s]})},k=function(e){var t=e.profileInfo,s=e.isOwner,n=e.setEditMode,r=e.startDialog;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Full name:"}),t.name]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"County: "}),t.location.country]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"City: "}),t.location.city]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Looking job: "}),t.IsLookingForAJob?"true":"false"]}),t.isLookingForAJob&&Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Resume: "}),t.ResumeText]}),Object(p.jsxs)("div",{className:u.a.contactsBlock,children:[Object(p.jsx)("b",{children:"Contacts: "}),Object(p.jsx)("div",{children:Object.keys(t.userContacts).map((function(e){return Object(p.jsx)(g,{site:e,url:t.userContacts[e]},e)}))})]}),s&&Object(p.jsx)("button",{onClick:n,children:"Edit"}),s||Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:r,children:"Dialog"})})]})},P=function(e){var t=Object(c.useState)(!1),s=Object(j.a)(t,2),n=s[0],r=s[1],i=Object(v.f)();return Object(p.jsxs)("div",{className:u.a.whiteText,children:[Object(p.jsx)("div",{children:Object(p.jsx)("img",{src:""===e.profileInfo.photoUrl?b.a:e.profileInfo.photoUrl,className:u.a.userPhoto})}),e.isOwner&&Object(p.jsx)("input",{type:"file",onChange:function(t){return function(t){e.saveAvatar(t.currentTarget.files[0])}(t)}}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Status: "}),Object(p.jsx)(f,{status:e.profileInfo.status,updateUserStatus:e.updateUserStatus})]}),Object(p.jsx)("div",{className:u.a.profileGeneralInfo,children:n?e.profileInfo.name&&Object(p.jsx)(m,{initialValues:e.profileInfo,setEditMode:function(){return r(!1)},onSubmit:function(t){var s=e.saveUser(t);Promise.all([s]).then((function(e){"error"!==e[0]&&r(!1)}))}}):e.profileInfo.name&&Object(p.jsx)(k,{profileInfo:e.profileInfo,isOwner:e.isOwner,setEditMode:function(){return r(!0)},startDialog:function(){e.startDialog(e.profileInfo.id),i.push("/dialogs")}})})]})},I=s(96),y=s(97),U=s(42),_=s(11),C=s(298),S=s.n(C),w=s(299),N=s.n(w),F=s(300),T=s.n(F),D=function(e){return Object(p.jsxs)("div",{className:T.a.item,children:[Object(p.jsx)("img",{src:"https://banner2.cleanpng.com/20180920/yko/kisspng-computer-icons-portable-network-graphics-avatar-ic-5ba3c66df14d32.3051789815374598219884.jpg"}),e.text,Object(p.jsx)("div",{children:Object(p.jsxs)("span",{children:["like ",e.likes]})})]})},A=s(85),B=Object(A.a)(10),L=Object(O.a)({form:"post"})((function(e){var t=e.handleSubmit;return Object(p.jsx)("div",{children:Object(p.jsxs)("form",{onSubmit:t,children:[Object(p.jsx)("div",{children:Object(p.jsx)(h.a,{name:"newposttext",component:x.b,validate:[A.b,B],placeholder:"New post"})}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{children:"Add post"})})]})})})),J=a.a.memo((function(e){var t=e.posts,s=e.addPost,n=t.map((function(e){return Object(p.jsx)(D,{text:e.text,likes:e.likes},e.id)}));return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:Object(p.jsx)(L,{onSubmit:function(e){s(e.newposttext)}})}),Object(p.jsx)("h3",{children:"My posts"}),Object(p.jsx)("div",{className:N.a.paddingTop10,children:n})]})})),M=Object(l.b)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){e(Object(I.c)(t))}}}))(J),R=function(e){Object(i.a)(s,e);var t=Object(o.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return this.getCurrentUserId()||this.props.history.push("/login"),Object(p.jsxs)(p.Fragment,{children:[this.props.profile.isLoading?Object(p.jsx)(U.a,{}):Object(p.jsxs)("div",{className:S.a.content,children:[Object(p.jsx)(P,{isOwner:!this.props.match.params.userId,profileInfo:this.props.profile.profileInfo,updateUserStatus:this.props.updateUserStatus,saveAvatar:this.props.saveAvatar,saveUser:this.props.saveUser,startDialog:function(){return e.props.startDialog(e.props.profile.profileInfo.id,e.props.messagePage,e.props.messagesPageSize)}}),Object(p.jsx)(M,{})]}),Object(p.jsx)("div",{children:this.props.a})]})}},{key:"getCurrentUserId",value:function(){return this.props.match.params.userId?this.props.match.params.userId:this.props.userId}},{key:"loadUserProfile",value:function(){var e=this.getCurrentUserId();e?this.props.getUserProfile(e):this.props.history.push("/login")}},{key:"componentDidMount",value:function(){this.loadUserProfile()}},{key:"componentWillUnmount",value:function(){this.props.setUsersProfile({})}}]),s}(a.a.Component);t.default=Object(_.d)(v.g,Object(l.b)((function(e){return{userId:e.auth.userId,profile:e.profilePage,messagePage:e.dialogsPage.currentMessagePage,messagesPageSize:e.dialogsPage.messagesPageSize}}),{getUserProfile:I.b,setUsersProfile:I.f,updateUserStatus:I.g,saveUser:I.e,saveAvatar:I.d,startDialog:y.e}))(R)}}]);
//# sourceMappingURL=3.e075ca71.chunk.js.map